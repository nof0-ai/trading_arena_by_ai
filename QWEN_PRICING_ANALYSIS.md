# AI 模型定价统计与费用分析

## 主流模型定价快速参考

### OpenAI 模型
| 模型 | 输入 ($/M tokens) | 输出 ($/M tokens) | 每日费用 | 月度费用 | 备注 |
|------|------------------|------------------|---------|---------|------|
| openai/gpt-5 | $1.25 | $10.00 | **$1.008** | **$30.24** | 最新最强模型 |
| openai/gpt-4o | $2.50 | $10.00 | $1.44 | $43.20 | 高性能版本 |
| openai/gpt-4o-mini | $0.15 | $0.60 | $0.0864 | $2.59 | 经济型版本 |

### Anthropic 模型
| 模型 | 输入 ($/M tokens) | 输出 ($/M tokens) | 每日费用 | 月度费用 | 备注 |
|------|------------------|------------------|---------|---------|------|
| anthropic/claude-3.7-sonnet | $3.00 | $15.00 | $1.728 | $51.84 | 高性能版本 |
| anthropic/claude-haiku-4.5 | $0.80 | $4.00 | $0.4608 | $13.82 | 经济型版本 |

### Google 模型
| 模型 | 输入 ($/M tokens) | 输出 ($/M tokens) | 每日费用 | 月度费用 | 备注 |
|------|------------------|------------------|---------|---------|------|
| google/gemini-2.5-pro | $1.25 | $5.00 | $0.648 | $19.44 | Pro 版本 |
| google/gemini-2.0-flash-exp:free | $0 | $0 | $0.00 | $0.00 | 免费版本 |

### Qwen 模型（免费版本）
| 模型 | 输入 ($/M tokens) | 输出 ($/M tokens) | 每日费用 | 月度费用 | 备注 |
|------|------------------|------------------|---------|---------|------|
| qwen/qwen-2.5-72b-instruct:free | $0 | $0 | **$0.00** | **$0.00** | 完全免费 |

---

## OpenRouter Qwen 模型定价列表

### 免费版本
| 模型 | 输入 ($/M tokens) | 输出 ($/M tokens) | 备注 |
|------|------------------|------------------|------|
| qwen/qwen-2.5-72b-instruct:free | $0 | $0 | 免费版本 |

### 收费版本（按价格从低到高）

#### 1. 小型模型（8B-14B）
| 模型 | 输入 ($/M tokens) | 输出 ($/M tokens) | 备注 |
|------|------------------|------------------|------|
| qwen/qwen3-8b-fp8 | $0.25 | $1.00 | 8B FP8 量化版本 |
| qwen/qwen2.5-7b-instruct | $0.35 | $0.35 | 7B 指令版本 |
| qwen/qwen3-14b | $0.30 | $0.60 | 14B 版本（需确认） |

#### 2. 中型模型（30B-32B）
| 模型 | 输入 ($/M tokens) | 输出 ($/M tokens) | 备注 |
|------|------------------|------------------|------|
| qwen/qwen3-30b-a3b-fp8 | $0.72 | $3.26 | 30B FP8 量化版本 |
| qwen/qwen3-32b-fp8 | $0.72 | $3.26 | 32B FP8 量化版本 |

#### 3. 大型模型（72B）
| 模型 | 输入 ($/M tokens) | 输出 ($/M tokens) | 备注 |
|------|------------------|------------------|------|
| qwen/qwen-2.5-72b-instruct | $2.75 | $2.88 | 72B 指令版本（收费版） |
| qwen/qwen2.5-vl-72b-instruct | $4.20 | $4.20 | 72B 视觉语言版本 |

#### 4. 超大型模型（80B-235B）
| 模型 | 输入 ($/M tokens) | 输出 ($/M tokens) | 备注 |
|------|------------------|------------------|------|
| qwen/qwen3-next-80b-a3b-instruct | $1.00 | $4.00 | 80B 指令版本 |
| qwen/qwen3-next-80b-a3b-thinking | $1.00 | $10.00 | 80B 思考版本 |
| qwen/qwen3-235b-a22b-fp8 | $1.45 | $5.80 | 235B FP8 量化版本 |
| qwen/qwen3-235b-a22b-instruct-2507 | $1.45 | $5.80 | 235B 指令版本 |
| qwen/qwen3-235b-a22b-thinking-2507 | $2.00 | $20.00 | 235B 思考版本 |
| qwen/qwen3-vl-235b-a22b-instruct | $2.00 | $8.00 | 235B 视觉语言指令版本 |
| qwen/qwen3-vl-235b-a22b-thinking | $2.00 | $20.00 | 235B 视觉语言思考版本 |

#### 5. 专业版本
| 模型 | 输入 ($/M tokens) | 输出 ($/M tokens) | 备注 |
|------|------------------|------------------|------|
| qwen/qwen3-coder-480b-a35b-instruct | $15.00 | $15.00 | 480B 代码生成专用版本 |

---

## 每次调用的 Token 消耗分析

基于代码分析 (`supabase/functions/process-bot-trade/index.ts`):

### 输入 Tokens
- **System message**: ~100 tokens
  ```
  "You are a professional cryptocurrency trading analyst. Analyze price data and provide concise, actionable insights."
  ```
- **User message**: 200-500 tokens（取决于 bot prompt 长度）
  - Bot prompt: 0-300 tokens（用户自定义）
  - Candle data prompt: ~150 tokens
    ```
    Current BTC candle data:
    Time: 2024-01-01T00:00:00.000Z
    Open: $42,000
    High: $42,500
    Low: $41,800
    Close: $42,200
    Change: +$200 (0.48%)
    Volume: 1,234,567
    ```
  - JSON format instructions: ~50 tokens
- **平均输入**: 400 tokens/次

### 输出 Tokens
- **max_tokens**: 500（代码中设置）
- **实际平均输出**: 300 tokens/次
  - JSON 格式分析结果
  - 包含：trend, analysis, recommendation, confidence, reasoning

### 单次调用总计
- **输入**: 400 tokens
- **输出**: 300 tokens
- **总计**: 700 tokens/次

---

## 每 5 分钟运行一次的费用计算

### 基础数据
- **运行频率**: 每 5 分钟 1 次
- **一天运行次数**: 24 小时 × 60 分钟 ÷ 5 分钟 = **288 次/天**
- **单次输入**: 400 tokens
- **单次输出**: 300 tokens

### 每日 Token 消耗
- **输入 tokens**: 400 × 288 = **115,200 tokens/天** = **0.1152M tokens/天**
- **输出 tokens**: 300 × 288 = **86,400 tokens/天** = **0.0864M tokens/天**
- **总 tokens**: 201,600 tokens/天 = **0.2016M tokens/天**

---

## 各模型每日费用计算

### 计算公式
```
每日费用 = (输入 tokens / 1,000,000) × 输入价格 + (输出 tokens / 1,000,000) × 输出价格
```

### 详细费用表

#### 免费版本
| 模型 | 输入费用 | 输出费用 | **每日总费用** |
|------|---------|---------|---------------|
| qwen/qwen-2.5-72b-instruct:free | $0.00 | $0.00 | **$0.00** |

#### 小型模型
| 模型 | 输入费用 | 输出费用 | **每日总费用** |
|------|---------|---------|---------------|
| qwen/qwen3-8b-fp8 | $0.0288 | $0.0864 | **$0.1152** |
| qwen/qwen2.5-7b-instruct | $0.0403 | $0.0302 | **$0.0705** |
| qwen/qwen3-14b | $0.0346 | $0.0518 | **$0.0864** |

#### 中型模型
| 模型 | 输入费用 | 输出费用 | **每日总费用** |
|------|---------|---------|---------------|
| qwen/qwen3-30b-a3b-fp8 | $0.0829 | $0.2817 | **$0.3646** |
| qwen/qwen3-32b-fp8 | $0.0829 | $0.2817 | **$0.3646** |

#### 大型模型（72B）
| 模型 | 输入费用 | 输出费用 | **每日总费用** |
|------|---------|---------|---------------|
| qwen/qwen-2.5-72b-instruct | $0.3168 | $0.2488 | **$0.5656** |
| qwen/qwen2.5-vl-72b-instruct | $0.4838 | $0.3629 | **$0.8467** |

#### 超大型模型
| 模型 | 输入费用 | 输出费用 | **每日总费用** |
|------|---------|---------|---------------|
| qwen/qwen3-next-80b-a3b-instruct | $0.1152 | $0.3456 | **$0.4608** |
| qwen/qwen3-next-80b-a3b-thinking | $0.1152 | $0.8640 | **$0.9792** |
| qwen/qwen3-235b-a22b-fp8 | $0.1670 | $0.5011 | **$0.6681** |
| qwen/qwen3-235b-a22b-instruct-2507 | $0.1670 | $0.5011 | **$0.6681** |
| qwen/qwen3-235b-a22b-thinking-2507 | $0.2304 | $1.7280 | **$1.9584** |
| qwen/qwen3-vl-235b-a22b-instruct | $0.2304 | $0.6912 | **$0.9216** |
| qwen/qwen3-vl-235b-a22b-thinking | $0.2304 | $1.7280 | **$1.9584** |

#### 专业版本
| 模型 | 输入费用 | 输出费用 | **每日总费用** |
|------|---------|---------|---------------|
| qwen/qwen3-coder-480b-a35b-instruct | $1.7280 | $1.2960 | **$3.0240** |

#### OpenAI GPT-5（新增）
| 模型 | 输入费用 | 输出费用 | **每日总费用** |
|------|---------|---------|---------------|
| openai/gpt-5 | $0.1440 | $0.8640 | **$1.0080** |

**GPT-5 详细计算**：
- 输入费用 = 0.1152M × $1.25 = $0.1440
- 输出费用 = 0.0864M × $10.00 = $0.8640
- **每日总费用 = $1.0080**（约 **$30.24/月**）

---

## 月度费用估算

基于每日费用 × 30 天：

| 模型类别 | 最低月费 | 最高月费 | 推荐模型 |
|---------|---------|---------|---------|
| 免费版 | $0.00 | $0.00 | qwen/qwen-2.5-72b-instruct:free |
| 小型模型 | $2.12 | $3.46 | qwen/qwen2.5-7b-instruct |
| 中型模型 | $10.94 | $10.94 | qwen/qwen3-32b-fp8 |
| 大型模型（72B） | $16.97 | $25.40 | qwen/qwen-2.5-72b-instruct |
| 超大型模型 | $13.82 | $58.75 | qwen/qwen3-next-80b-a3b-instruct |
| 专业版本 | $90.72 | $90.72 | qwen/qwen3-coder-480b-a35b-instruct |
| **OpenAI GPT-5** | **$30.24** | **$30.24** | **openai/gpt-5** |

---

## 费用计算步骤详解

### 步骤 1: 计算每日运行次数
```
一天 = 24 小时 × 60 分钟 = 1,440 分钟
每 5 分钟运行 1 次
每日运行次数 = 1,440 ÷ 5 = 288 次
```

### 步骤 2: 计算单次 Token 消耗
```
输入 tokens = System message (~100) + User message (~300) = 400 tokens
输出 tokens = 平均 300 tokens（max 500）
```

### 步骤 3: 计算每日 Token 消耗
```
每日输入 tokens = 400 × 288 = 115,200 tokens = 0.1152M tokens
每日输出 tokens = 300 × 288 = 86,400 tokens = 0.0864M tokens
```

### 步骤 4: 计算每日费用

**示例 1：qwen/qwen-2.5-72b-instruct**
```
输入价格 = $2.75 / M tokens
输出价格 = $2.88 / M tokens

输入费用 = 0.1152 × $2.75 = $0.3168
输出费用 = 0.0864 × $2.88 = $0.2488
每日总费用 = $0.3168 + $0.2488 = $0.5656
```

**示例 2：openai/gpt-5**（根据 [OpenRouter GPT-5 页面](https://openrouter.ai/openai/gpt-5)）
```
输入价格 = $1.25 / M tokens
输出价格 = $10.00 / M tokens

输入费用 = 0.1152 × $1.25 = $0.1440
输出费用 = 0.0864 × $10.00 = $0.8640
每日总费用 = $0.1440 + $0.8640 = $1.0080
```

### 步骤 5: 计算月度费用
```
月度费用 = 每日费用 × 30

qwen/qwen-2.5-72b-instruct: $0.5656 × 30 = $16.97
openai/gpt-5: $1.0080 × 30 = $30.24
```

---

## 注意事项

1. **实际 Token 消耗可能因以下因素变化**：
   - Bot prompt 长度（用户自定义）
   - 交易对数量（多交易对会增加处理次数）
   - AI 响应长度（实际可能少于 300 tokens）

2. **价格可能随时变化**：
   - OpenRouter 的定价可能会调整
   - 建议定期查看 OpenRouter 官方定价页面

3. **免费版本限制**：
   - 免费版本可能有速率限制
   - 可能不适合生产环境高频使用

4. **推荐模型选择**：
   - **预算有限**: `qwen/qwen-2.5-72b-instruct:free`（免费）
   - **性价比**: `qwen/qwen2.5-7b-instruct`（$2.12/月）
   - **性能**: `qwen/qwen-2.5-72b-instruct`（$16.97/月，收费版）
   - **最佳性能**: `openai/gpt-5`（$30.24/月，最新最强模型）
   - **平衡选择**: `qwen/qwen3-next-80b-a3b-instruct`（$13.82/月，性能与价格平衡）

---

## 数据来源

- OpenRouter 官方定价页面
- 代码分析：`supabase/functions/process-bot-trade/index.ts`
- 最后更新：2025-01-XX

---

## 更新日志

- 2025-01-XX: 初始版本，包含所有 Qwen 模型定价和费用计算
- 2025-01-XX: 添加 OpenAI GPT-5 和其他主流模型定价信息

